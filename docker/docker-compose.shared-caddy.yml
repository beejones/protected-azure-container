services:
  # Multi-app pattern: disable the per-stack Caddy sidecar and attach the app
  # stack to a shared external network.
  #
  # With this file included, the `caddy` service will NOT start unless you
  # explicitly enable its profile.
  app:
    networks:
      - internal
      - caddy

  caddy:
    profiles: ["per-stack-caddy"]

networks:
  caddy:
    external: true
    name: caddy
